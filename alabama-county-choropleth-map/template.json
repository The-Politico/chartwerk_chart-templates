{
    "axes": {
        "base": {
            "dateFormat": null,
            "format": {
                "double": {
                    "customTicks": [],
                    "dateString": "Y",
                    "frequency": 1,
                    "ticks": 7
                },
                "single": {
                    "customTicks": [],
                    "dateString": "Y",
                    "frequency": 2,
                    "ticks": 7
                }
            },
            "label": "",
            "max": null,
            "min": null,
            "prefix": "",
            "shadedRegions": [],
            "suffix": "",
            "type": "categorical"
        },
        "color": {
            "byFacet": false,
            "domain": [],
            "ignoreScale": false,
            "quantize": false,
            "quantizeProps": {
                "column": null,
                "groups": 0,
                "reverseColors": false
            },
            "range": [],
            "scheme": "sequential.moneyfoam"
        },
        "scale": {
            "prefix": "",
            "suffix": ""
        },
        "value": {
            "format": {
                "double": {
                    "customTicks": [],
                    "ticks": 7
                },
                "single": {
                    "customTicks": [],
                    "ticks": 7
                }
            },
            "label": "",
            "max": null,
            "min": null,
            "prefix": "$",
            "shadedRegions": [],
            "suffix": ""
        }
    },
    "data": [
        {
            "county": "Autauga",
            "value": "6,363"
        },
        {
            "county": "Baldwin",
            "value": "18,424"
        },
        {
            "county": "Barbour",
            "value": "5,912"
        },
        {
            "county": "Bibb",
            "value": "2,202"
        },
        {
            "county": "Blount",
            "value": "2,970"
        },
        {
            "county": "Bullock",
            "value": "4,061"
        },
        {
            "county": "Butler",
            "value": "4,374"
        },
        {
            "county": "Calhoun",
            "value": "15,511"
        },
        {
            "county": "Chambers",
            "value": "6,871"
        },
        {
            "county": "Cherokee",
            "value": "2,132"
        },
        {
            "county": "Chilton",
            "value": "3,397"
        },
        {
            "county": "Choctaw",
            "value": "3,786"
        },
        {
            "county": "Clarke",
            "value": "6,334"
        },
        {
            "county": "Clay",
            "value": "1,777"
        },
        {
            "county": "Cleburne",
            "value": 971
        },
        {
            "county": "Coffee",
            "value": "4,925"
        },
        {
            "county": "Colbert",
            "value": "9,166"
        },
        {
            "county": "Conecuh",
            "value": "3,555"
        },
        {
            "county": "Coosa",
            "value": "2,191"
        },
        {
            "county": "Covington",
            "value": "3,158"
        },
        {
            "county": "Crenshaw",
            "value": "2,050"
        },
        {
            "county": "Cullman",
            "value": "5,052"
        },
        {
            "county": "Dale",
            "value": "5,286"
        },
        {
            "county": "Dallas",
            "value": "14,612"
        },
        {
            "county": "DeKalb",
            "value": "5,239"
        },
        {
            "county": "Elmore",
            "value": "8,954"
        },
        {
            "county": "Escambia",
            "value": "5,489"
        },
        {
            "county": "Etowah",
            "value": "12,803"
        },
        {
            "county": "Fayette",
            "value": "1,817"
        },
        {
            "county": "Franklin",
            "value": "3,171"
        },
        {
            "county": "Geneva",
            "value": "2,039"
        },
        {
            "county": "Greene",
            "value": "4,521"
        },
        {
            "county": "Hale",
            "value": "5,411"
        },
        {
            "county": "Henry",
            "value": "3,083"
        },
        {
            "county": "Houston",
            "value": "12,367"
        },
        {
            "county": "Jackson",
            "value": "5,822"
        },
        {
            "county": "Jefferson",
            "value": "159,876"
        },
        {
            "county": "Lamar",
            "value": "1,646"
        },
        {
            "county": "Lauderdale",
            "value": "12,511"
        },
        {
            "county": "Lawrence",
            "value": "5,069"
        },
        {
            "county": "Lee",
            "value": "21,381"
        },
        {
            "county": "Limestone",
            "value": "9,829"
        },
        {
            "county": "Lowndes",
            "value": "5,747"
        },
        {
            "county": "Macon",
            "value": "9,045"
        },
        {
            "county": "Madison",
            "value": "62,015"
        },
        {
            "county": "Marengo",
            "value": "6,167"
        },
        {
            "county": "Marion",
            "value": "2,249"
        },
        {
            "county": "Marshall",
            "value": "6,299"
        },
        {
            "county": "Mobile",
            "value": "78,760"
        },
        {
            "county": "Monroe",
            "value": "4,914"
        },
        {
            "county": "Montgomery",
            "value": "63,085"
        },
        {
            "county": "Morgan",
            "value": "13,439"
        },
        {
            "county": "Perry",
            "value": "4,568"
        },
        {
            "county": "Pickens",
            "value": "4,455"
        },
        {
            "county": "Pike",
            "value": "6,035"
        },
        {
            "county": "Randolph",
            "value": "3,078"
        },
        {
            "county": "Russell",
            "value": "10,500"
        },
        {
            "county": "St. Clair",
            "value": "5,801"
        },
        {
            "county": "Shelby",
            "value": "20,051"
        },
        {
            "county": "Sumter",
            "value": "5,421"
        },
        {
            "county": "Talladega",
            "value": "13,905"
        },
        {
            "county": "Tallapoosa",
            "value": "6,319"
        },
        {
            "county": "Tuscaloosa",
            "value": "32,048"
        },
        {
            "county": "Walker",
            "value": "6,557"
        },
        {
            "county": "Washington",
            "value": "2,976"
        },
        {
            "county": "Wilcox",
            "value": "4,868"
        },
        {
            "county": "Winston",
            "value": "1,286"
        }
    ],
    "datamap": {
        "base": null,
        "custom": {},
        "facet": null,
        "ignore": [],
        "scale": null,
        "series": [],
        "sort": [
            "county",
            "value"
        ],
        "value": null
    },
    "embed": {
        "dimensions": {}
    },
    "margins": {
        "double": {
            "bottom": 0.050000000000000044,
            "left": 0.05,
            "right": 0.050000000000000044,
            "top": 0.05
        },
        "single": {
            "bottom": 0.050000000000000044,
            "left": 0.05,
            "right": 0.050000000000000044,
            "top": 0.05
        }
    },
    "scripts": {
        "dependencies": {
            "scripts": [
                "https://cdnjs.cloudflare.com/ajax/libs/d3/4.12.0/d3.min.js",
                "https://cdnjs.cloudflare.com/ajax/libs/topojson/3.0.2/topojson.min.js"
            ],
            "styles": []
        },
        "draw": "function draw(){\n    var initialProps = {\n        dims: {\n          single: { width: 270, height: 205 },\n          double: { width: 580, height: 370}\n        },\n    };\n    \n    var werk = werkHelper.build(initialProps);\n\t\n\tvar comma = d3.format(\",\");\n\n    var map = d3.map(werk.data, function(d){ return d.county; }),\n        path = d3.geoPath();\n\t\n\tvar svg = d3.select(\"#chart\").append(\"svg\")\n      .style(\"background-color\",\"transparent\")\n        .attr(\"width\", werk.dims.svg.width + werk.dims.margins.left + werk.dims.margins.right)\n        .attr(\"height\", werk.dims.svg.height + werk.dims.margins.top + werk.dims.margins.bottom)\n      .append(\"g\")\n        .attr(\"transform\", \"translate(\" + werk.dims.margins.left + \",\" + werk.dims.margins.top + \")\");\n    \n\n    function getCounty(d){\n        return map.get(d.properties.state + d.properties.county) ||\n            map.get(d.properties.county) ||\n            map.get(werkHelper.slugify(d.properties.name)) ||\n            map.get(werkHelper.slugify(d.properties.name.replace(' County', '')))\n            false;\n    }\n\n    d3.json(\"https://www.politico.com/interactives/elections/data/geography/2016/state/01/counties.json\", function(error, geoData){\n\n        \n        var features = topojson.feature(geoData, {\n            type: 'GeometryCollection',\n            geometries: geoData.objects['-'].geometries,\n        });\n        \n        var path = d3.geoPath()\n          .projection(d3.geoMercator()\n            .fitSize([werk.dims.svg.width, werk.dims.svg.height], features));\n        \n        var mapG = svg.append(\"g\")\n            .attr(\"id\", \"counties\")\n            .attr(\"width\", werk.dims.svg.width)\n            .attr(\"height\", werk.dims.svg.height);\n        \n        var counties = mapG.selectAll(\"path\")\n            .data(features.features);\n        \n        counties.enter().append(\"path\")\n            .attr('d', path)\n            .attr(\"class\", \"county\")\n            .style('fill', function(d){\n                if (getCounty(d)) {\n                    return werk.scales.color(getCounty(d).value);\n                }\n                return '#e2e2e2';\n            })\n            .style(\"stroke\", \"#fff\")\n            .on(\"mouseover\",function(d){\n                \n                if (getCounty(d)) {\n                    d3.select(this)\n                      .style(\"stroke\", \"black\")\n                      .moveToFront();\n                  \n                    d3.select(\".tooltip .title\")\n                      .text(d.properties.NAME);\n                  \n                    d3.select(\".tooltip .value\")\n                      .text(function(){\n                          var s = chartwerk.axes.scale;\n                          var data = getCounty(d);\n                          if (data) {\n                              if (data.tooltip){\n                                  return data.tooltip;\n                              } else {\n                                  return chartwerk.axes.color.quantize ? \n                                    s.prefix + comma(data.value) + s.suffix : data.value;\n                              }\n                          }\n                      });\n                      \n                    var p = d3.mouse(this.parentElement.parentElement);\n                    \n                    d3.select(\".tooltip\")\n                        .style(\"opacity\", 1)\n                        .style(\"top\",function(){\n                            return p[1].toString() + \"px\";\n                        })\n                        .style(\"left\", function(){\n                            // We position either left or right of the mouse point based\n                            // on whether we're past the midpoint of the chart. This protects\n                            // against tooltips overflowing embedded iframes.\n                            var s = chartwerk.ui.size,\n                                w = werk.dims[s].width,\n                                tipW = parseInt(d3.select(\".tooltip\").style(\"width\"), 10),\n                                pos = p[0] > (w / 2) ?\n                                    p[0] - (tipW - 10) : p[0] + 40;\n                            return pos.toString() + \"px\";\n                        });\n                }\n            })\n            .on(\"mouseout\",function(){\n                d3.select(this)\n                  .style(\"stroke\",\"#fff\")\n                  .style('fill', function(d){ \n                    if (getCounty(d)) {\n                        return werk.scales.color(getCounty(d).value);\n                    }\n                    return '#e2e2e2';\n                });\n                d3.select(\".tooltip\")\n                    .style(\"opacity\", 0);\n            });\n    });\n    \n    var tooltip = d3.select(\"#chart\")\n      .append(\"div\")\n        .attr(\"class\",\"tooltip\")\n        .style(\"position\",\"absolute\");\n    tooltip\n      .append(\"div\")\n      .attr(\"class\",\"title\")\n      .text(chartwerk.datamap.scale);\n    tooltip\n      .append(\"div\")\n      .attr(\"class\",\"value\");\n}",
        "helper": "var werkHelper = {\n    prototype: function() {\n        d3.selection.prototype.moveToFront = function() {\n          return this.each(function(){\n            this.parentNode.appendChild(this);\n          });\n        };\n    },\n    \n    slugify: function(text){\n        return text ? text.toString().toLowerCase()\n            .replace(/\\s+/g, '-')\n            .replace(/[^\\w\\-]+/g, '')\n            .replace(/\\-\\-+/g, '-')\n            .replace(/^-+/, '')\n            .replace(/-+$/, '') : text;\n    },\n    \n    parse: function(werk){\n        var localslugify = this.slugify;\n        werk.data = chartwerk.data.map(function(d){\n            return {\n                county: localslugify(d[chartwerk.datamap.base]),\n                value: +d[chartwerk.datamap.scale],\n                // value: chartwerk.axes.color.quantize ? \n                //     +d[chartwerk.datamap.scale] : d[chartwerk.datamap.scale],\n                tooltip: chartwerk.datamap.custom.tooltip !== '' ?\n                    d[chartwerk.datamap.custom.tooltip] : null,\n            };\n        });\n    },\n    \n    dims: function(werk){\n        var s = chartwerk.ui.size;\n            w = werk.dims[s].width,\n            h = werk.dims[s].height,\n            margins = {\n                right: chartwerk.margins[s].right * w,\n                left: chartwerk.margins[s].left * w,\n                top: chartwerk.margins[s].top * h,\n                bottom: chartwerk.margins[s].bottom * h\n            },\n            svg = {\n                width: w - margins.left - margins.right,\n                height: h - margins.top - margins.bottom\n            };\n        \n        werk.dims.margins = margins;\n        werk.dims.svg = svg;\n    },\n\n    scales: function(werk){\n        var svg = werk.dims.svg;\n        werk.scales = {\n            color: chartwerk.axes.color.quantize ? \n                d3.scaleThreshold() : d3.scaleOrdinal(),\n        };\n        \n        werk.scales.color\n            .domain(chartwerk.axes.color.domain)\n            .range(chartwerk.axes.color.range);\n    },\n\n    // Build dims, scales and axes.\n    build: function(werk){\n        this.prototype();\n        this.parse(werk);\n        this.dims(werk);\n        this.scales(werk);\n        return werk;\n    },\n};\n\n",
        "html": "<div id='chart-header'>\n\t<h2 id='headline'></h2>\n\t<div id='chatter'></div> \n</div> \n<div id='chart-ui'>\n\t<!--You can put any necessary buttons, etc., here.-->\n</div>\n<div id='chart-legend'></div>\n<div id='chart'></div> \n<div id='chart-footer'> \n\t<div id='footnote'></div> \n\t<div id='source'></div> \n\t<div id='author'></div> \n</div>",
        "styles": "#chartwerk {\n    font-family:'proxima-nova', arial, sans-serif;\n    font-weight: 200;\n    width:560px;\n    padding: 20px 0;\n    background: #f7f8f8 url(http://static.politico.com/resource/images/website/shared/template/bg-noise.24d18bcf9d414e030c36ffd7f30648e8.jpg) repeat left top;\n}\n\n#chartwerk {\n    background: inherit;\n}\n\n#chartwerk.single{\n    width:270px;\n    float:left;\n    overflow:hidden;\n    margin:10px 30px 10px 0;\n}\n\n#chartwerk strong{\n    font-weight: 600;\n}\n\n#chartwerk #chart-header{\n    line-height: 1.45em;\n    font-weight: 400;\n}\n\n#chartwerk.single{\n    width:290px;\n    float:left;\n    overflow:hidden;\n    margin:10px 30px 10px 0;\n}\n#chartwerk #headline { \n    font-weight:bold;\n    font-size:25px;\n    line-height: 1.05em;\n}\n#chartwerk #chatter {\n    margin: 6px 0px 12px;\n    font-size: 17px;\n}\n#chartwerk #footnote,\n#chartwerk #source,\n#chartwerk #author {\n    font-size:12px;\n    font-weight: 400\n    color:#666;\n    display: inline-block;\n\n}\n#chartwerk #author {\n    text-align:right;\n}\n\n.double #chart-footer #author{\n    float: right;\n}\n\n.single #chart-footer #source{\n    font-weight: 400;\n    font-size: 10px;\n}\n\n.single #chart-footer #author{\n    font-weight: 400;\n    font-size: 10px;\n    float: left;\n}\n\n#chartwerk.single #footnote,\n#chartwerk.single #source,\n#chartwerk.single #author {\n    display: block;\n}\n\n#chartwerk #chart-footer {\n    margin-top: 12px;\n}\n\n#chartwerk.single #headline { \n    font-size:22px;\n}\n\n#chartwerk.single #chatter {\n    margin: 8px 0px 10px;\n    font-size: 14px;\n    line-height: 1.2em;\n}\n\n#chartwerk.single #chart-header #headline{\n    line-height: 1em;\n}\n\n#chart-legend .chart-legend-container.bg, #chart .chart-legend-container.bg{\n    background: #f7f8f8 url(http://static.politico.com/resource/images/website/shared/template/bg-noise.24d18bcf9d414e030c36ffd7f30648e8.jpg) repeat left top;\n}\n\n#chartwerk #chart-legend \n.chart-legend-container .key-label{\n    font-family:'franklin-gothic-urw', arial, sans-serif;\n    font-weight: 400;\n    font-size: 11px;\n    margin-left: -3px;\n}\n\n#chartwerk #chart path.line{\n    fill: none;\n    stroke-width: 2px;\n}\n\n#chartwerk #chart-legend{\n    margin-top:10px;\n}\n\n#chartwerk #chart-legend \n.chart-legend-container .key-color{\n    margin-right:2px;\n    margin-top: 2px;\n    width: 10px;\n    height: 10px;\n}\n\n#chartwerk #chart path.county{\n    stroke-width:1px;\n    cursor:crosshair;\n}\n\n#chartwerk #chart{\n    position:relative;\n}\n\n#chartwerk #chart .tooltip{\n    font-family: 'franklin-gothic-urw', arial, sans-serif;\n    font-weight: 200;\n    opacity:0;\n    pointer-events:none;\n    padding:5px;\n    width:auto;\n    max-width: 200px;\n    line-height: 1.15em;\n    background:rgb(255,255,255);\n}\n\n#chartwerk.single #chart .tooltip{\n    font-family: 'franklin-gothic-urw', arial, sans-serif;\n    font-weight: 200;\n    font-size: 0.8em;\n    opacity:0;\n    pointer-events:none;\n    padding:5px;\n    width:auto;\n    max-width: 100px;\n    line-height: 1em;\n    background:rgb(255,255,255);\n}\n\n#chartwerk #chart .tooltip .title{\n    font-weight: bold;\n    fill:grey;\n}\n\n#chartwerk #chart .tooltip .value{\n    font-weight: normal;\n}\n\n#preview-pane{\n    background-color: #f7f8f8;\n}\n\n#chartwerk .annotation .inner p{\n    font-size: 14px;\n    line-height: 1.2em;\n    font-family:'franklin-gothic-urw', arial, sans-serif;\n}\n\n#chartwerk .annotation p{\n    font-family: inherit;\n    font-weight: 200;\n}"
    },
    "template": {
        "description": "Use this map if you want to compare counties.\n\nYour data must include a column of county names or FIPS codes. This column should be classified as a \"Base axis.\"\n\nYou should classify your value column as a \"Scale column\" on the data tab.",
        "icon": null,
        "id": "us-state-choropleth-map",
        "tags": [],
        "title": "Alabama county choropleth map"
    },
    "text": {
        "annotations": [],
        "author": "Sarah Frostenson / POLITICO",
        "chatter": "Where you can \u2014 and can't \u2014 smoke the reefer.",
        "footnote": "",
        "headline": "The United States of Marijuana",
        "legend": {
            "active": false,
            "double": {
                "align": "l",
                "background": true,
                "inside": false,
                "position": {
                    "x": 10,
                    "y": 10
                },
                "width": 500
            },
            "keys": [],
            "single": {
                "align": "l",
                "background": true,
                "inside": false,
                "position": {
                    "x": 10,
                    "y": 10
                },
                "width": 250
            },
            "title": ""
        },
        "source": "SOURCE: National Organization for the Reform of Marijuana Laws",
        "title": ""
    },
    "ui": {
        "datamap": [
            {
                "alias": "County",
                "available": true,
                "class": "base"
            },
            {
                "alias": "value axis",
                "available": false,
                "class": "value"
            },
            {
                "alias": "Color value",
                "available": true,
                "class": "scale"
            },
            {
                "alias": "data series",
                "available": false,
                "class": "series"
            },
            {
                "alias": "faceting column",
                "available": false,
                "class": "facet"
            },
            {
                "alias": "ignored column",
                "available": false,
                "class": "ignore"
            },
            {
                "alias": "Tooltip",
                "available": true,
                "class": "tooltip"
            }
        ],
        "rawData": "county\tvalue\nAutauga\t6,363\nBaldwin\t18,424\nBarbour\t5,912\nBibb\t2,202\nBlount\t2,970\nBullock\t4,061\nButler\t4,374\nCalhoun\t15,511\nChambers\t6,871\nCherokee\t2,132\nChilton\t3,397\nChoctaw\t3,786\nClarke\t6,334\nClay\t1,777\nCleburne\t971\nCoffee\t4,925\nColbert\t9,166\nConecuh\t3,555\nCoosa\t2,191\nCovington\t3,158\nCrenshaw\t2,050\nCullman\t5,052\nDale\t5,286\nDallas\t14,612\nDeKalb\t5,239\nElmore\t8,954\nEscambia\t5,489\nEtowah\t12,803\nFayette\t1,817\nFranklin\t3,171\nGeneva\t2,039\nGreene\t4,521\nHale\t5,411\nHenry\t3,083\nHouston\t12,367\nJackson\t5,822\nJefferson\t159,876\nLamar\t1,646\nLauderdale\t12,511\nLawrence\t5,069\nLee\t21,381\nLimestone\t9,829\nLowndes\t5,747\nMacon\t9,045\nMadison\t62,015\nMarengo\t6,167\nMarion\t2,249\nMarshall\t6,299\nMobile\t78,760\nMonroe\t4,914\nMontgomery\t63,085\nMorgan\t13,439\nPerry\t4,568\nPickens\t4,455\nPike\t6,035\nRandolph\t3,078\nRussell\t10,500\nSt. Clair\t5,801\nShelby\t20,051\nSumter\t5,421\nTalladega\t13,905\nTallapoosa\t6,319\nTuscaloosa\t32,048\nWalker\t6,557\nWashington\t2,976\nWilcox\t4,868\nWinston\t1,286",
        "size": "double"
    }
}