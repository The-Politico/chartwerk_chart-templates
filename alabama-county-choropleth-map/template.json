{
    "axes": {
        "base": {
            "dateFormat": null,
            "format": {
                "double": {
                    "customTicks": [],
                    "dateString": "Y",
                    "frequency": 1,
                    "ticks": 7
                },
                "single": {
                    "customTicks": [],
                    "dateString": "Y",
                    "frequency": 2,
                    "ticks": 7
                }
            },
            "label": "",
            "max": null,
            "min": null,
            "prefix": "",
            "shadedRegions": [],
            "suffix": "",
            "type": "categorical"
        },
        "color": {
            "byFacet": false,
            "domain": [
                30.98,
                49.65,
                68.33
            ],
            "ignoreScale": false,
            "quantize": true,
            "quantizeProps": {
                "column": "PercentObama",
                "groups": 4,
                "reverseColors": true
            },
            "range": [
                "#e5e8f6",
                "#afbbe3",
                "#7791d1",
                "#2b6abd"
            ],
            "scheme": "sequential.democrat"
        },
        "scale": {
            "prefix": "",
            "suffix": "%"
        },
        "value": {
            "format": {
                "double": {
                    "customTicks": [],
                    "ticks": 7
                },
                "single": {
                    "customTicks": [],
                    "ticks": 7
                }
            },
            "label": "",
            "max": null,
            "min": null,
            "prefix": "$",
            "shadedRegions": [],
            "suffix": ""
        }
    },
    "data": [
        {
            "County": "Autauga",
            "PercentObama": 26.5
        },
        {
            "County": "Baldwin",
            "PercentObama": 21.6
        },
        {
            "County": "Barbour",
            "PercentObama": 51.3
        },
        {
            "County": "Bibb",
            "PercentObama": 26.2
        },
        {
            "County": "Blount",
            "PercentObama": 12.3
        },
        {
            "County": "Bullock",
            "PercentObama": 76.3
        },
        {
            "County": "Butler",
            "PercentObama": 46
        },
        {
            "County": "Calhoun",
            "PercentObama": 33.5
        },
        {
            "County": "Chambers",
            "PercentObama": 47
        },
        {
            "County": "Cherokee",
            "PercentObama": 21.8
        },
        {
            "County": "Chilton",
            "PercentObama": 19.4
        },
        {
            "County": "Choctaw",
            "PercentObama": 47.5
        },
        {
            "County": "Clarke",
            "PercentObama": 45.7
        },
        {
            "County": "Clay",
            "PercentObama": 26.6
        },
        {
            "County": "Cleburne",
            "PercentObama": 15.4
        },
        {
            "County": "Coffee",
            "PercentObama": 24.8
        },
        {
            "County": "Colbert",
            "PercentObama": 39.1
        },
        {
            "County": "Conecuh",
            "PercentObama": 50.6
        },
        {
            "County": "Coosa",
            "PercentObama": 41.5
        },
        {
            "County": "Covington",
            "PercentObama": 20.5
        },
        {
            "County": "Crenshaw",
            "PercentObama": 31.9
        },
        {
            "County": "Cullman",
            "PercentObama": 14.6
        },
        {
            "County": "Dale",
            "PercentObama": 28.4
        },
        {
            "County": "Dallas",
            "PercentObama": 69.7
        },
        {
            "County": "DeKalb",
            "PercentObama": 21.9
        },
        {
            "County": "Elmore",
            "PercentObama": 25.2
        },
        {
            "County": "Escambia",
            "PercentObama": 36.9
        },
        {
            "County": "Etowah",
            "PercentObama": 30
        },
        {
            "County": "Fayette",
            "PercentObama": 22.8
        },
        {
            "County": "Franklin",
            "PercentObama": 29.1
        },
        {
            "County": "Geneva",
            "PercentObama": 18
        },
        {
            "County": "Greene",
            "PercentObama": 84.6
        },
        {
            "County": "Hale",
            "PercentObama": 62.6
        },
        {
            "County": "Henry",
            "PercentObama": 35.2
        },
        {
            "County": "Houston",
            "PercentObama": 29.5
        },
        {
            "County": "Jackson",
            "PercentObama": 28.2
        },
        {
            "County": "Jefferson",
            "PercentObama": 52.5
        },
        {
            "County": "Lamar",
            "PercentObama": 22.9
        },
        {
            "County": "Lauderdale",
            "PercentObama": 33.8
        },
        {
            "County": "Lawrence",
            "PercentObama": 35.8
        },
        {
            "County": "Lee",
            "PercentObama": 39.2
        },
        {
            "County": "Limestone",
            "PercentObama": 27.7
        },
        {
            "County": "Lowndes",
            "PercentObama": 76.4
        },
        {
            "County": "Macon",
            "PercentObama": 87
        },
        {
            "County": "Madison",
            "PercentObama": 39.9
        },
        {
            "County": "Marengo",
            "PercentObama": 53.4
        },
        {
            "County": "Marion",
            "PercentObama": 18.5
        },
        {
            "County": "Marshall",
            "PercentObama": 19.3
        },
        {
            "County": "Mobile",
            "PercentObama": 45
        },
        {
            "County": "Monroe",
            "PercentObama": 45.9
        },
        {
            "County": "Montgomery",
            "PercentObama": 61.8
        },
        {
            "County": "Morgan",
            "PercentObama": 27.2
        },
        {
            "County": "Perry",
            "PercentObama": 74.9
        },
        {
            "County": "Pickens",
            "PercentObama": 46.3
        },
        {
            "County": "Pike",
            "PercentObama": 42.7
        },
        {
            "County": "Randolph",
            "PercentObama": 29.5
        },
        {
            "County": "Russell",
            "PercentObama": 55.5
        },
        {
            "County": "St. Clair",
            "PercentObama": 16.5
        },
        {
            "County": "Shelby",
            "PercentObama": 21.6
        },
        {
            "County": "Sumter",
            "PercentObama": 77.1
        },
        {
            "County": "Talladega",
            "PercentObama": 41.6
        },
        {
            "County": "Tallapoosa",
            "PercentObama": 33.5
        },
        {
            "County": "Tuscaloosa",
            "PercentObama": 40.7
        },
        {
            "County": "Walker",
            "PercentObama": 22.9
        },
        {
            "County": "Washington",
            "PercentObama": 33.9
        },
        {
            "County": "Wilcox",
            "PercentObama": 74.3
        },
        {
            "County": "Winston",
            "PercentObama": 13.2
        }
    ],
    "datamap": {
        "base": "County",
        "custom": {},
        "facet": null,
        "ignore": [],
        "scale": "PercentObama",
        "series": [],
        "sort": [],
        "value": null
    },
    "embed": {
        "dimensions": {
            "double": {
                "height": 549.9715576171875,
                "width": 560
            },
            "single": {
                "height": 464.0766906738281,
                "width": 290
            }
        }
    },
    "margins": {
        "double": {
            "bottom": 0.050000000000000044,
            "left": 0.05,
            "right": 0.050000000000000044,
            "top": 0.05
        },
        "single": {
            "bottom": 0.050000000000000044,
            "left": 0.05,
            "right": 0.050000000000000044,
            "top": 0.05
        }
    },
    "scripts": {
        "dependencies": {
            "scripts": [
                "https://cdnjs.cloudflare.com/ajax/libs/d3/4.12.0/d3.min.js",
                "https://cdnjs.cloudflare.com/ajax/libs/topojson/3.0.2/topojson.min.js"
            ],
            "styles": []
        },
        "draw": "function draw(){\n    var initialProps = {\n        dims: {\n          single: { width: 270, height: 325 },\n          double: { width: 580, height: 450}\n        },\n    };\n    \n    var werk = werkHelper.build(initialProps);\n    console.log(werk.data);\n\t\n\tvar comma = d3.format(\",\");\n\n    var map = d3.map(werk.data, function(d){ return d.county; }),\n        path = d3.geoPath();\n\t\n\tvar svg = d3.select(\"#chart\").append(\"svg\")\n      .style(\"background-color\",\"transparent\")\n        .attr(\"width\", werk.dims.svg.width + werk.dims.margins.left + werk.dims.margins.right)\n        .attr(\"height\", werk.dims.svg.height + werk.dims.margins.top + werk.dims.margins.bottom)\n      .append(\"g\")\n        .attr(\"transform\", \"translate(\" + werk.dims.margins.left + \",\" + werk.dims.margins.top + \")\");\n    \n\n    function getCounty(d){\n        // Uses properties in topojson to retrieve the correct datum in your\n        // user's data. Should handle most use cases, but you may need to customize\n        // for individual states.\n        return map.get(d.properties.state + d.properties.county) || // Full fips\n            map.get(d.properties.county) || // Just county fips\n            map.get(werkHelper.slugify(d.properties.name)) || // Full county name, ie, Fulham County\n            map.get(werkHelper.slugify(d.properties.name.replace(' County', ''))) // Just the name\n            false;\n    }\n\n    d3.json(\"https://www.politico.com/interactives/elections/data/geography/2016/state/01/counties.json\", function(error, geoData){\n\n        \n        var features = topojson.feature(geoData, {\n            type: 'GeometryCollection',\n            geometries: geoData.objects['-'].geometries,\n        });\n        \n        var path = d3.geoPath()\n          .projection(d3.geoMercator()\n            .fitSize([werk.dims.svg.width, werk.dims.svg.height], features));\n        \n        var mapG = svg.append(\"g\")\n            .attr(\"id\", \"counties\")\n            .attr(\"width\", werk.dims.svg.width)\n            .attr(\"height\", werk.dims.svg.height);\n        \n        var counties = mapG.selectAll(\"path\")\n            .data(features.features);\n        \n        counties.enter().append(\"path\")\n            .attr('d', path)\n            .attr(\"class\", \"county\")\n            .style('fill', function(d){\n                if (getCounty(d)) {\n                    return werk.scales.color(getCounty(d).value);\n                }\n                return '#e2e2e2';\n            })\n            .style(\"stroke\", \"white\")\n            .style(\"stroke-width\", 0.5)\n            .on(\"mouseover\",function(d){\n                \n                if (getCounty(d)) {\n                    d3.select(this)\n                      .style(\"stroke\", \"black\")\n                      .moveToFront();\n                  \n                    d3.select(\".tooltip .title\")\n                      .text(d.properties.name);\n                  \n                    d3.select(\".tooltip .value\")\n                      .text(function(){\n                          var s = chartwerk.axes.scale;\n                          var data = getCounty(d);\n                          if (data) {\n                              if (data.tooltip){\n                                  return data.tooltip;\n                              } else {\n                                  return chartwerk.axes.color.quantize ? \n                                    s.prefix + comma(data.value) + s.suffix : data.value;\n                              }\n                          }\n                      });\n                      \n                    var p = d3.mouse(this.parentElement.parentElement);\n                    \n                    d3.select(\".tooltip\")\n                        .style(\"opacity\", 1)\n                        .style(\"top\",function(){\n                            return p[1].toString() + \"px\";\n                        })\n                        .style(\"left\", function(){\n                            // We position either left or right of the mouse point based\n                            // on whether we're past the midpoint of the chart. This protects\n                            // against tooltips overflowing embedded iframes.\n                            var s = chartwerk.ui.size,\n                                w = werk.dims[s].width,\n                                tipW = parseInt(d3.select(\".tooltip\").style(\"width\"), 10),\n                                pos = p[0] > (w / 2) ?\n                                    p[0] - (tipW - 10) : p[0] + 40;\n                            return pos.toString() + \"px\";\n                        });\n                }\n            })\n            .on(\"mouseout\",function(){\n                d3.select(this)\n                  .style(\"stroke\",\"#ccc\")\n                  .style('fill', function(d){ \n                    if (getCounty(d)) {\n                        return werk.scales.color(getCounty(d).value);\n                    }\n                    return '#e2e2e2';\n                });\n                d3.select(\".tooltip\")\n                    .style(\"opacity\", 0);\n            });\n    });\n    \n    var tooltip = d3.select(\"#chart\")\n      .append(\"div\")\n        .attr(\"class\",\"tooltip\")\n        .style(\"position\",\"absolute\");\n    tooltip\n      .append(\"div\")\n      .attr(\"class\",\"title\")\n      .text(chartwerk.datamap.scale);\n    tooltip\n      .append(\"div\")\n      .attr(\"class\",\"value\");\n}",
        "helper": "var werkHelper = {\n    prototype: function() {\n        d3.selection.prototype.moveToFront = function() {\n          return this.each(function(){\n            this.parentNode.appendChild(this);\n          });\n        };\n    },\n    \n    slugify: function(text){\n        return text ? text.toString().toLowerCase()\n            .replace(/\\s+/g, '-')\n            .replace(/[^\\w\\-]+/g, '')\n            .replace(/\\-\\-+/g, '-')\n            .replace(/^-+/, '')\n            .replace(/-+$/, '') : text;\n    },\n    \n    parse: function(werk){\n        var localslugify = this.slugify;\n        werk.data = chartwerk.data.map(function(d){\n            return {\n                county: localslugify(d[chartwerk.datamap.base]),\n                value: +d[chartwerk.datamap.scale],\n                // value: chartwerk.axes.color.quantize ? \n                //     +d[chartwerk.datamap.scale] : d[chartwerk.datamap.scale],\n                tooltip: chartwerk.datamap.custom.tooltip !== '' ?\n                    d[chartwerk.datamap.custom.tooltip] : null,\n            };\n        });\n    },\n    \n    dims: function(werk){\n        var s = chartwerk.ui.size;\n            w = werk.dims[s].width,\n            h = werk.dims[s].height,\n            margins = {\n                right: chartwerk.margins[s].right * w,\n                left: chartwerk.margins[s].left * w,\n                top: chartwerk.margins[s].top * h,\n                bottom: chartwerk.margins[s].bottom * h\n            },\n            svg = {\n                width: w - margins.left - margins.right,\n                height: h - margins.top - margins.bottom\n            };\n        \n        werk.dims.margins = margins;\n        werk.dims.svg = svg;\n    },\n\n    scales: function(werk){\n        var svg = werk.dims.svg;\n        werk.scales = {\n            color: chartwerk.axes.color.quantize ? \n                d3.scaleThreshold() : d3.scaleOrdinal(),\n        };\n        \n        werk.scales.color\n            .domain(chartwerk.axes.color.domain)\n            .range(chartwerk.axes.color.range);\n    },\n\n    // Build dims, scales and axes.\n    build: function(werk){\n        this.prototype();\n        this.parse(werk);\n        this.dims(werk);\n        this.scales(werk);\n        return werk;\n    },\n};\n\n",
        "html": "<div id='chart-header'>\n\t<h2 id='headline'></h2>\n\t<div id='chatter'></div> \n</div> \n<div id='chart-ui'>\n\t<!--You can put any necessary buttons, etc., here.-->\n</div>\n<div id='chart-legend'></div>\n<div id='chart'></div> \n<div id='chart-footer'> \n\t<div id='footnote'></div> \n\t<div id='source'></div> \n\t<div id='author'></div> \n</div>",
        "styles": "#chartwerk {\n    font-family:'proxima-nova', arial, sans-serif;\n    font-weight: 200;\n    width:560px;\n    padding: 20px 0;\n    background: #f7f8f8 url(http://static.politico.com/resource/images/website/shared/template/bg-noise.24d18bcf9d414e030c36ffd7f30648e8.jpg) repeat left top;\n}\n\n#chartwerk {\n    background: inherit;\n}\n\n#chartwerk.single{\n    width:270px;\n    float:left;\n    overflow:hidden;\n    margin:10px 30px 10px 0;\n}\n\n#chartwerk strong{\n    font-weight: 600;\n}\n\n#chartwerk #chart-header{\n    line-height: 1.45em;\n    font-weight: 400;\n}\n\n#chartwerk.single{\n    width:290px;\n    float:left;\n    overflow:hidden;\n    margin:10px 30px 10px 0;\n}\n#chartwerk #headline { \n    font-weight:bold;\n    font-size:25px;\n    line-height: 1.05em;\n    margin: 0px;\n}\n#chartwerk #chatter {\n    margin: 6px 0px 12px;\n    font-size: 17px;\n}\n#chartwerk #footnote,\n#chartwerk #source,\n#chartwerk #author {\n    font-size:12px;\n    font-weight: 400\n    color:#666;\n    display: inline-block;\n\n}\n#chartwerk #author {\n    text-align:right;\n}\n\n#chartwerk #chart-footer #author{\n    float: right;\n}\n\n#chartwerk.single #chart-footer #source{\n    font-weight: 400;\n    font-size: 10px;\n}\n\n#chartwerk.single #chart-footer #author{\n    font-weight: 400;\n    font-size: 10px;\n    float: left;\n}\n\n#chartwerk #chart-footer #source{\n    vertical-align: text-top;\n    max-width: 350px;\n}\n\n#chartwerk.single #footnote,\n#chartwerk.single #source,\n#chartwerk.single #author {\n    display: block;\n}\n\n#chartwerk #chart-footer {\n    margin-top: 12px;\n}\n\n#chartwerk.single #headline { \n    font-size:22px;\n}\n\n#chartwerk.single #chatter {\n    margin: 8px 0px 10px;\n    font-size: 14px;\n    line-height: 1.2em;\n}\n\n#chartwerk.single #chart-header #headline{\n    line-height: 1em;\n}\n\n#chart-legend .chart-legend-container.bg, #chart .chart-legend-container.bg{\n    background: #f7f8f8 url(http://static.politico.com/resource/images/website/shared/template/bg-noise.24d18bcf9d414e030c36ffd7f30648e8.jpg) repeat left top;\n}\n\n#chartwerk #chart-legend \n.chart-legend-container .key-label{\n    font-family:'franklin-gothic-urw', arial, sans-serif;\n    font-weight: 400;\n    font-size: 11px;\n    margin-left: -3px;\n}\n\n#chartwerk #chart path.line{\n    fill: none;\n    stroke-width: 2px;\n}\n\n#chartwerk #chart-legend{\n    margin-top:10px;\n}\n\n#chartwerk #chart-legend \n.chart-legend-container .key-color{\n    margin-right:2px;\n    margin-top: 2px;\n    width: 10px;\n    height: 10px;\n}\n\n#chartwerk #chart path.county{\n    stroke-width:1px;\n    cursor:crosshair;\n}\n\n#chartwerk #chart{\n    position:relative;\n}\n\n#chartwerk #chart .tooltip{\n    font-family: 'franklin-gothic-urw', arial, sans-serif;\n    font-weight: 200;\n    opacity:0;\n    pointer-events:none;\n    padding:5px;\n    width:auto;\n    max-width: 200px;\n    line-height: 1.15em;\n    background:rgb(255,255,255);\n}\n\n#chartwerk.single #chart .tooltip{\n    font-family: 'franklin-gothic-urw', arial, sans-serif;\n    font-weight: 200;\n    font-size: 0.8em;\n    opacity:0;\n    pointer-events:none;\n    padding:5px;\n    width:auto;\n    max-width: 100px;\n    line-height: 1em;\n    background:rgb(255,255,255);\n}\n\n#chartwerk #chart .tooltip .title{\n    font-weight: bold;\n    fill:grey;\n}\n\n#chartwerk #chart .tooltip .value{\n    font-weight: normal;\n}\n\n#preview-pane{\n    background-color: #f7f8f8;\n}\n\n#chartwerk .annotation .inner p{\n    font-size: 14px;\n    line-height: 1.2em;\n    font-family:'franklin-gothic-urw', arial, sans-serif;\n}\n\n#chart .annotation .inner{\n    margin: 0px;\n}\n\n#chartwerk .annotation p{\n    font-family: inherit;\n    font-weight: 200;\n}"
    },
    "template": {
        "description": "Use this map if you want to compare counties.\n\nYour data must include a column of county names or FIPS codes.",
        "icon": null,
        "id": "us-state-choropleth-map",
        "tags": [],
        "title": "Alabama county choropleth map"
    },
    "text": {
        "annotations": [],
        "author": "Polly Politico / POLITICO",
        "chatter": "Here's where Obama was most competitive in the state.",
        "footnote": "",
        "headline": "Where can Democrats win in Alabama?",
        "legend": {
            "active": false,
            "double": {
                "align": "l",
                "background": true,
                "inside": false,
                "position": {
                    "x": 10,
                    "y": 10
                },
                "width": 500
            },
            "keys": [
                {
                    "color": "#e5e8f6",
                    "text": "12.3"
                },
                {
                    "color": "#afbbe3",
                    "text": "30.98"
                },
                {
                    "color": "#7791d1",
                    "text": "49.65"
                },
                {
                    "color": "#2b6abd",
                    "text": "68.33"
                }
            ],
            "single": {
                "align": "l",
                "background": true,
                "inside": false,
                "position": {
                    "x": 10,
                    "y": 10
                },
                "width": 250
            },
            "title": ""
        },
        "source": "SOURCE: OpenElections",
        "title": "alabama map test1"
    },
    "ui": {
        "datamap": [
            {
                "alias": "County",
                "available": true,
                "class": "base"
            },
            {
                "alias": "value axis",
                "available": false,
                "class": "value"
            },
            {
                "alias": "Color value",
                "available": true,
                "class": "scale"
            },
            {
                "alias": "data series",
                "available": false,
                "class": "series"
            },
            {
                "alias": "faceting column",
                "available": false,
                "class": "facet"
            },
            {
                "alias": "ignored column",
                "available": false,
                "class": "ignore"
            },
            {
                "alias": "Tooltip",
                "available": true,
                "class": "tooltip"
            }
        ],
        "rawData": "County\tPercentObama\nAutauga\t26.5\nBaldwin\t21.6\nBarbour\t51.3\nBibb\t26.2\nBlount\t12.3\nBullock\t76.3\nButler\t46.0\nCalhoun\t33.5\nChambers\t47.0\nCherokee\t21.8\nChilton\t19.4\nChoctaw\t47.5\nClarke\t45.7\nClay\t26.6\nCleburne\t15.4\nCoffee\t24.8\nColbert\t39.1\nConecuh\t50.6\nCoosa\t41.5\nCovington\t20.5\nCrenshaw\t31.9\nCullman\t14.6\nDale\t28.4\nDallas\t69.7\nDeKalb\t21.9\nElmore\t25.2\nEscambia\t36.9\nEtowah\t30.0\nFayette\t22.8\nFranklin\t29.1\nGeneva\t18.0\nGreene\t84.6\nHale\t62.6\nHenry\t35.2\nHouston\t29.5\nJackson\t28.2\nJefferson\t52.5\nLamar\t22.9\nLauderdale\t33.8\nLawrence\t35.8\nLee\t39.2\nLimestone\t27.7\nLowndes\t76.4\nMacon\t87.0\nMadison\t39.9\nMarengo\t53.4\nMarion\t18.5\nMarshall\t19.3\nMobile\t45.0\nMonroe\t45.9\nMontgomery\t61.8\nMorgan\t27.2\nPerry\t74.9\nPickens\t46.3\nPike\t42.7\nRandolph\t29.5\nRussell\t55.5\nSt. Clair\t16.5\nShelby\t21.6\nSumter\t77.1\nTalladega\t41.6\nTallapoosa\t33.5\nTuscaloosa\t40.7\nWalker\t22.9\nWashington\t33.9\nWilcox\t74.3\nWinston\t13.2",
        "size": "single"
    }
}